!function(e,t){e.fn.TS_VCSC_MouseWheel=function(a){var o,i=e(this),n=["DOMMouseScroll","mousewheel"],r="EventListener",s=function(e){return e=e||window.event,a(e,e.wheelDelta?e.wheelDelta/120:e.detail/3),e.preventDefault(),!1};i.on("mouseover mouseout",function(e){for(var a in n)e.target[e.target["add"+r]!==t?((o="mouseout"==e.type)?"remove":"add")+r:(o?"attach":"detach")+"Event"](n[a],s,!1)})}}(jQuery),function(e,t){"use strict";var a={mode:"continuous",thumbs:$TS_VCSC_Lightbox_Thumbs,thumbsize:$TS_VCSC_Lightbox_Thumbsize,scheme:$TS_VCSC_Lightbox_Scheme,theme:"metro",size:"960,540",play:!0,autoplay:!1,closer:$TS_VCSC_Lightbox_Closer,share:$TS_VCSC_Lightbox_Share,social:$TS_VCSC_Lightbox_Social,duration:4e3,keyboard:$TS_VCSC_Lightbox_Keyboard,fullscreen:$TS_VCSC_Lightbox_FullScreen,margin:10,zoom:$TS_VCSC_Lightbox_Zoom,fxspeed:$TS_VCSC_Lightbox_FXSpeed,grid:0,gridspace:4,gridorder:!0,captions:$TS_VCSC_Lightbox_Captions,gridfilter:!1,random:"",gridavailable:"Available Groups",gridselected:"Filtered Groups",gridnogroups:"No Groups",gridtoggle:"Toggle Filter",gridtogglestyle:"",gridshowall:"Show All",gridshowallstyle:"",info:!1,backlight:$TS_VCSC_Lightbox_Backlight,usecolor:$TS_VCSC_Lightbox_UseColor,animation:$TS_VCSC_Lightbox_Animation,cors:$TS_VCSC_Lightbox_CORS,hashpath:"composer/",bgclose:$TS_VCSC_Lightbox_BGClose,notouch:$TS_VCSC_Lightbox_NoTouch,nohashes:$TS_VCSC_Lightbox_NoHashes,tapping:$TS_VCSC_Lightbox_Tapping,overlay:$TS_VCSC_Lightbox_Overlay,background:$TS_VCSC_Lightbox_Background,repeat:$TS_VCSC_Lightbox_Repeat,noise:$TS_VCSC_Lightbox_Noise},o={title:!1,type:!1,thumbnail:"",contenttype:"video",listid:"",videofirst:"",videosother:"",userid:"",search:"",groups:!1,videoplay:!1,related:!1,loop:!1,modest:!1,infobar:!0,controls:1,autohide:1,start:"",end:"",nohashes:$TS_VCSC_Lightbox_NoHashes,usecors:"global",rel:!1,src:!1,href:!1,width:0,height:0,color:!1,effect:!1},i={},n={light:!1,current:!1,scrollbar:!0,all:{},phase:!0,css3:window.nchcss3,hash:"",isTouchDevice:!1,ns:e({}),event:{trigger:function(){n.ns.trigger.apply(n.ns,arguments)},on:function(){n.ns.on.apply(n.ns,arguments)},off:function(){n.ns.off.apply(n.ns,arguments)}},canFS:!1,onload:!1},r={},s={open:function(e){e.group.main.fadeIn(300)},close:function(e){var t;e.main.fadeOut(300),d.pause(!1);for(var a in e.set)(t=e.set[a].thumb)&&(t.className="")},slideOut:function(e,o){var i=d.getFX(e.opts.effect,e),r=e.group,s=r.css3,l=r.blocks.preview,c=n.phase?-1:1,h=i(0,0,0,1)!==t,u=function(e){return(h?i(0,0,0,e):e)+n.wsize};i(s,c,!0),l.stop().animate({scrollLeft:u(-c*n.wsize)},{duration:a.fxspeed,complete:function(){r.blocks.media.css("visibility","hidden"),i(s,0),o()}}),e.thumb!==t&&(e.thumb.className="")},slideIn:function(e,o){o=o===t?function(){}:o;var i=d.getFX(e.opts.effect,e),r=e.group,s=r.css3,l=r.blocks.preview,c=n.phase?1:-1,h=i(0,0,0,1)!==t,u=function(e){return(h?i(0,0,0,e):e)+n.wsize};i(s,c),r.blocks.media.css("visibility","visible"),s.el.offsetHeight+1,i(s,0,!0),r.blocks.media.css("visibility","visible"),l.stop().scrollLeft(u(-c*n.wsize)).animate({scrollLeft:u(0)},a.fxspeed,function(){l.scrollLeft(u(0))})}},l={youtube:{is:function(e){var t=e.opts.href.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/);return t?(e.opts.size||(e.opts.size=e.group.opts.size),e.opts.videoid=t[1],!0):!1},create:function(e){if("true"==e.opts.related)var t="rel=1";else var t="rel=0";if("true"==e.opts.loop)var a="&loop=1",o="&playlist="+e.opts.videoid;else var a="&loop=0",o="";if("true"==e.opts.videoplay)var i="&autoplay=1";else var i="&autoplay=0";if("true"==e.opts.infobar)var n="&showinfo=1";else var n="&showinfo=0";if("true"==e.opts.modest)var r="&modestbranding=1";else var r="&modestbranding=0";var s="&controls="+e.opts.controls,l="&autohide="+e.opts.autohide;if(""!=e.opts.start&&parseInt(e.opts.start)>0)var c="&start="+e.opts.start;else var c="";if(""!=e.opts.end&&parseInt(e.opts.end)>0&&parseInt(e.opts.end)>parseInt(e.opts.start))var h="&end="+e.opts.end;else var h="";if("https:"==document.location.protocol);else;return"video"==e.opts.contenttype?'<iframe class="nch-lb-iframe nch-video-youtube" src="https://www.youtube.com/embed/'+e.opts.videoid+"?"+t+a+o+n+r+c+h+i+s+l+'&wmode=opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen></iframe>':"playlist"==e.opts.contenttype?'<iframe class="nch-lb-iframe nch-video-youtube" src="https://www.youtube.com/embed?listType=playlist&list='+e.opts.listid+n+"&"+t+a+r+i+s+l+'&wmode=opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen></iframe>':"searchterm"==e.opts.contenttype?'<iframe class="nch-lb-iframe nch-video-youtube" src="https://www.youtube.com/embed?listType=search&list='+e.opts.search+n+"&"+t+a+r+i+s+l+'&wmode=opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen></iframe>':"combination"==e.opts.contenttype?'<iframe class="nch-lb-iframe nch-video-youtube" src="https://www.youtube.com/embed/'+e.opts.videofirst+"?playlist="+e.opts.videosother+n+"&"+t+a+r+i+s+l+'&wmode=opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen></iframe>':"uploads"==e.opts.contenttype?'<iframe class="nch-lb-iframe nch-video-youtube" src="https://www.youtube.com/embed?listType=user_uploads&list='+e.opts.userid+n+"&"+t+a+r+i+s+l+'&wmode=opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen></iframe>':""},thumb:function(e,t){d.loadThumb.call(e,e.opts.src="https://img.youtube.com/vi/"+e.opts.videoid+"/hqdefault.jpg",t)},video:!0},vimeo:{is:function(e){var t=e.opts.href.match(/(http|https):\/\/(?:www.)?(?:(vimeo).com)\/(.*)/);return t?(e.opts.videoid=t[3],e.opts.size||(e.opts.size=e.group.opts.size),!0):!1},create:function(e){if("https:"==document.location.protocol);else;return"true"==e.opts.videoplay?'<iframe class="nch-lb-iframe nch-video-vimeo" src="https://player.vimeo.com/video/'+e.opts.videoid+'?autoplay=1&wmode=opaque" width="500" height="500" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>':'<iframe class="nch-lb-iframe nch-video-vimeo" src="https://player.vimeo.com/video/'+e.opts.videoid+'?autoplay=0&wmode=opaque" width="500" height="500" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},thumb:function(t,a){e.getJSON("https://vimeo.com/api/v2/video/"+t.opts.videoid+".json?callback=?",{format:"json"},function(e){d.loadThumb.call(t,t.opts.src=e[0].thumbnail_large,a)})},video:!0},dailymotion:{is:function(e){var a=e.opts.href.match(/^.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/);return null!==a?(e.opts.videoid=a[4]!==t?a[4]:a[2],e.opts.size||(e.opts.size=e.group.opts.size),!0):!1},create:function(e){if("https:"==document.location.protocol);else;if("true"==e.opts.videoplay)var t="autoplay=1";else var t="autoplay=0";if("true"==e.opts.related)var a="&related=1";else var a="&related=0";return'<iframe class="nch-lb-iframe nch-video-dailymotion" src="https://www.dailymotion.com/embed/video/'+e.opts.videoid+"?"+t+a+'&forcedQuality=hq&wmode=opaque" width="500" height="500" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},thumb:function(e,t){d.loadThumb.call(e,e.opts.src="https://www.dailymotion.com/thumbnail/video/"+e.opts.videoid,t)},video:!0},html:{is:function(e){return e.opts.href=e.opts.href.replace(window.location,""),"#"==e.opts.href.charAt(0)||"."==e.opts.href.charAt(0)},create:function(t){return e(t.opts.href).show().get(0)}},video:{is:function(){return!0},create:function(e){var t='data-videoid="'+e.opts.videoid+'" data-videotheme="'+e.opts.videotheme+'" data-videoholder="'+e.opts.videoholder+'"';return t+='data-videoautoplay="'+e.opts.videoautoplay+'" data-videoautostop="'+e.opts.videoautostop+'" data-videorepeat="'+e.opts.videorepeat+'"',t+='data-videofullscreen="'+e.opts.videofullscreen+'" data-videoposter="'+e.opts.videoposter+'" data-videoposterfit="'+e.opts.videoposterfit+'"',t+='data-videotitle="'+e.opts.videotitle+'" data-videoobjectfit="'+e.opts.videoobjectfit+'"',t+='data-logoshow="'+e.opts.logoshow+'" data-logoimage="'+e.opts.logoimage+'" data-logoheight="'+e.opts.logoheight+'" data-logoopacity="'+e.opts.logoopacity+'" data-logoposition="'+e.opts.logoposition+'" data-logourl="'+e.opts.logourl+'" data-logotitle="'+e.opts.logotitle+'" data-logotarget="'+e.opts.logotarget+'"',t+='data-videomp4="'+e.opts.videomp4+'" data-videowebm="'+e.opts.videowebm+'" data-videoogg="'+e.opts.videoogg+'"',t+='data-videovolume="'+e.opts.videovolume+'" data-videolightbox="'+e.opts.videolightbox+'" data-videoshare="'+e.opts.videoshare+'" data-videofallback="'+e.opts.videofallback+'" data-videoscreensize="'+e.opts.videoscreensize+'"',t+='width="100%" height="auto" scrolling="no" frameborder="0" type="text/html" mozallowfullscreen="mozallowfullscreen webkitallowfullscreen="webkitallowfullscreen" allowfullscreen="allowfullscreen"','<iframe id="'+e.opts.videoholder+'" class="nch-lb-iframe nch-video-html5" src="'+e.opts.href+'?wmode=opaque" '+t+"></iframe>"},thumb:function(e,t){d.loadThumb.call(e,e.opts.src=e.opts.videoposter,t)},video:!0},audio:{is:function(){return!0},create:function(e){var t='data-audioid="'+e.opts.audioid+'" data-audiotheme="'+e.opts.audiotheme+'" data-audiobaronly="'+e.opts.audiobaronly+'" data-audiobarwidth="'+e.opts.audiobarwidth+'" data-audioholder="'+e.opts.audioholder+'"';return t+='data-audioautoplay="'+e.opts.audioautoplay+'" data-audioautostop="'+e.opts.audioautostop+'" data-audiorepeat="'+e.opts.audiorepeat+'"',t+="true"==e.opts.audiobaronly?'data-audiofullscreen="'+e.opts.audiofullscreen+'" data-audioposter="" data-audioposterfit="'+e.opts.audioposterfit+'"':'data-audiofullscreen="'+e.opts.audiofullscreen+'" data-audioposter="'+e.opts.audioposter+'" data-audioposterfit="'+e.opts.audioposterfit+'"',t+='data-audiotitle="'+e.opts.audiotitle+'" data-audioobjectfit="'+e.opts.audioobjectfit+'"',t+='data-logoshow="'+e.opts.logoshow+'" data-logoimage="'+e.opts.logoimage+'" data-logoheight="'+e.opts.logoheight+'" data-logoopacity="'+e.opts.logoopacity+'" data-logoposition="'+e.opts.logoposition+'" data-logourl="'+e.opts.logourl+'" data-logotitle="'+e.opts.logotitle+'" data-logotarget="'+e.opts.logotarget+'"',t+='data-audiomp4="'+e.opts.audiomp4+'" data-audiowebm="'+e.opts.audiowebm+'" data-audioogg="'+e.opts.audioogg+'"',t+='data-audiovolume="'+e.opts.audiovolume+'" data-audiolightbox="'+e.opts.audiolightbox+'" data-audioshare="'+e.opts.audioshare+'" data-audiofallback="'+e.opts.audiofallback+'" data-audioscreensize="'+e.opts.audioscreensize+'"',t+="true"==e.opts.audiobaronly?'width="100%" height="38px" style="width: 100%; max-height: 38px; max-width: '+e.opts.audiobarwidth+'px; padding-bottom: 0; padding-top: 0;" scrolling="no" frameborder="0" type="text/html" mozallowfullscreen="mozallowfullscreen webkitallowfullscreen="webkitallowfullscreen" allowfullscreen="allowfullscreen"':'width="100%" height="auto" style="width: 100%; height: auto;" scrolling="no" frameborder="0" type="text/html" mozallowfullscreen="mozallowfullscreen webkitallowfullscreen="webkitallowfullscreen" allowfullscreen="allowfullscreen"','<iframe id="'+e.opts.videoholder+'" class="nch-lb-iframe nch-audio-html5" src="'+e.opts.href+'" '+t+"></iframe>"},thumb:function(e,t){d.loadThumb.call(e,e.opts.src=e.opts.audioposter,t)},audio:!0},ajax:{is:function(e){return e.opts.href.search(/^https?:\/\//i)<0},create:function(t,a){e.ajax({url:t.opts.href,success:a})}},iframe:{is:function(){return!0},create:function(e){return'<iframe class="nch-lb-iframe" src="'+e.opts.href+'" frameBorder="0"></iframe>'}}},c={init:function(i){var r=arguments,s=e(this);if(0==s.length){if(i===t)return s;i.length===t&&1==r.length?e.extend(a,i):(s=d.setFrom.apply(this,[i.charAt!==t?[i]:i,r[1]||{}]),(r[1]||{}).open===t&&c.open.call(s))}else i=i||{},s.each(function(a,r){var s,l=e(r),c=l.is("img")?l:e("img",l);if("true"==l.attr("data-lightbox-init"))return!0;if(s=e.extend({},o,d.getDataProperties(l,{rel:"rel",title:"title",href:"href"})),c.length>0?(s.src=c.attr("src"),s.thumbnail="undefined"!=typeof l.attr("data-thumbnail")&&""!=l.attr("data-thumbnail")?l.attr("data-thumbnail"):""):"undefined"!=typeof l.attr("data-thumbnail")&&""!=l.attr("data-thumbnail")&&(s.src=l.attr("data-thumbnail"),s.thumbnail=l.attr("data-thumbnail")),l.attr("data-lightbox-init","true"),(l.is("a")||0==c.length)&&(c=l),s.rel)n.all[s.rel]===t&&(n.all[s.rel]=new d.mediaGroup(i,s.rel)),n.all[s.rel].add(c,s);else{var h=new d.mediaGroup(i);h.add(c,s),n.all[h.name]=h}});for(var l in n.all)d.renderGrid(n.all[l]);return s},open:function(o){var i,r=e(this);if(o!==t&&n.all[o]!==t&&(i=n.all[o].set[0]),r.data("nch-lb-media")!==t)i=r.data("nch-lb-media");else if(this.jquery)return c.init.apply(this,arguments),c.open.call(this);i&&(n.event.trigger("open",[i.group,i]),n.hash="#"+a.hashpath+i.opts.hash,"false"==i.opts.nohashes||0==i.opts.nohashes?window.location.hash=n.hash:"true"==i.opts.nohashes||1==i.opts.nohashes?a.nohashes=!0:a.nohashes||(window.location.hash=n.hash)),n.scrollpos=n.w.scrollTop(),n.doc.addClass("nch-lb-noscroll"),void 0!=i&&"undefined"!=i&&jQuery(window).trigger("opennacho",i)},next:function(e){if(n.current){var o=n.current,i=o.set.length,r=o.current,s=o.set[r+1==i?0:r+1];1!=i&&(n.hash="#"+a.hashpath+s.opts.hash,"false"==s.opts.nohashes||0==s.opts.nohashes?window.location.hash=n.hash:"true"==s.opts.nohashes||1==s.opts.nohashes?a.nohashes=!0:a.nohashes||(window.location.hash=n.hash),d.pause(e===t),n.phase=!0,n.event.trigger("next",[n.current,s]))}},previous:function(){if(n.current){var e=n.current,t=e.set.length,o=e.current,i=e.set[0==o?t-1:o-1];1!=t&&(n.hash="#"+a.hashpath+i.opts.hash,"false"==i.opts.nohashes||0==i.opts.nohashes?window.location.hash=n.hash:"true"==i.opts.nohashes||1==i.opts.nohashes?a.nohashes=!0:a.nohashes||(window.location.hash=n.hash),d.pause(!1),n.phase=!1,n.event.trigger("previous",[n.current,i]))}},close:function(){if(n.current){{var e=n.current,t=e.about,a=e.main,o="nch-lb-zooming",i=e.set[e.current];i.nsize}a.hasClass(o)?(n.zooming=!1,d.updateMediaLayout(i),e.blocks.zoom.find(".nch-lb-zoom-container").remove(),a.toggleClass(o)):t?d.toggleInfo(!t):(n.hash="",window.location.hash="",history&&history.pushState&&history.pushState("",document.title,window.location.pathname+window.location.search),e.playing&&c.play(),d.fs.on&&d.fs.toggle(),d.detachMedia(e.set[e.current]),n.event.trigger("close",e),s.close(e),n.current.paused=!1,n.current=e.current=!1,n.doc.removeClass("nch-lb-noscroll"),"none"!=$TS_VCSC_Lightbox_ScrollBlock&&window.setTimeout(function(){n.w.scrollTop(n.scrollpos)},10))}},fx:function(a,o){o===t?e.extend(r,a):r[a]=o},access:function(e,a){return e!==t&&(d[e]=a),d},play:function(e){var a=n.current,o=a.opts,i=a.main,r=a.blocks.loading,s=a.playing,l=o.duration;if(o.play)return e===t&&s?s:(i.toggleClass("nch-lb-playing"),i.find(".nch-lb-icon-play").html(s?"p":"s"),s?r.stop():r.animate({width:i.width()},{easing:"linear",duration:(1-r.width()/i.width())*l,complete:function(){a.paused=!0,c.next()}}),e!==!1&&n.event.trigger(s?"stop":"play",a),a.playing=!s)},stop:function(){return n.current.playing&&c.play(!0),!1},info:function(){return n.current?d.toggleInfo.apply({},arguments):void 0},addEvent:function(e,t){n.event.on(e,t)},removeEvent:function(e,t){n.event.off(e,t)},getGroupName:function(){var a,o=e(this),i=!1;return o.length>0&&(a=e(o.get(0)).data("nch-lb-media"))!==t?a.group.name:i},getMediaId:function(){var a,o=e(this),i=!1;return o.length>0&&(a=e(o.get(0)).data("nch-lb-media"))!==t?a.opts.hash:i}},h="",d={toggleInfo:function(e){var a=n.current,o=a.blocks,i=o.info.children(".nch-lb-info-panel");return e!==t&&a.about==e?e:(o.info["fade"+(a.about?"Out":"In")](400),i.append(a.info.show()),n.event.trigger((a.about?"close":"open")+"_info",[a]),a.about=!a.about)},selectThumb:function(a){var o,i=a.thumb,n=a.group,r=n.blocks,s=0,l=e(i),c=l.parent(),h=c.prev().find("img").get(0),d=c.next().find("img").get(0);if(i!==t&&n.opts.thumbs){for(var u in n.set)(o=n.set[u].thumb)&&(o.className="");var p,f,g,m=(i.className="nch-lb-thumb-s",n.opts),v={top:1,bottom:1,left:0,right:0}[m.thumbs],b=r.bthumbs,w=(r.thumbs,b[v?"width":"height"]()),y=v?"left":"top",_="offset"+(v?"Width":"Height"),x={};s=b[f="scroll"+y.substr(0,1).toUpperCase()+y.substr(1)](),g=l.position()[y];var C=g-4,S=g+(p=i[_])+4;h!==t&&(C-=h[_]+4),d!==t&&(S+=d[_]+4),S-C>w?x[f]=g+i[_]/2-w/2:s>C?x[f]=C:S-w>s&&(x[f]=S-w),b.animate(x,200)}},scrollThumbs:function(e,t){var a,o=n.current,i=o.opts,r=i.thumbs,s={left:"Top",top:"Left",right:"Top",bottom:"Left"};o&&r&&(a=o.blocks.bthumbs,a["scroll"+s[r]](a["scroll"+s[r]]()+120*t))},swipeThumbs:function(e){var t,a,o,i,r,s,l,c,h,d,u,p,f=n.current,g=f.opts,m=g.thumbs,v={left:"Top",top:"Left",right:"Top",bottom:"Left"};"none"!=g.thumbs&&("bottom"!=g.thumbs&&"top"!=g.thumbs||"swipeup"!=e.type&&"swipedown"!=e.type)&&("left"!=g.thumbs&&"right"!=g.thumbs||"swipeleft"!=e.type&&"swiperight"!=e.type)&&("swipeleft"==e.type||"swipeup"==e.type?a=1:("swiperight"==e.type||"swipedown"==e.type)&&(a=-1),f&&m&&(o=1==$TS_VCSC_Hammer_ReleaseNew?e.distance:e.gesture.distance,l=f.blocks.bthumbs[0].clientWidth,r=f.blocks.bthumbs[0].clientHeight,s=f.blocks.thumbs[0].clientWidth,i=f.blocks.thumbs[0].clientHeight,c=f.blocks.thumbs[0].childElementCount,"bottom"==g.thumbs||"top"==g.thumbs?(h=s/c,d=r,u=l/h,p=o>2*h?o:2*h):("left"==g.thumbs||"right"==g.thumbs)&&(h=l,d=i/c,u=r/d,p=o>2*d?o:2*d),t=f.blocks.bthumbs,t["scroll"+v[m]](t["scroll"+v[m]]()+a*p)))},swipeGesture:function(o){function i(e){return(h=e.gesture)?(u=h.deltaX,void(((p=Math.abs(u))>25||g)&&(g=!0,f.stop().scrollLeft(_(-u)),w(b,u/n.wsize)))):!1}function r(){var e=n.current.set.length,t=n.current.current;p>m&&e>1&&("linear"==n.current.opts.mode?!(0==t&&u/p>0||t==e-1&&0>u/p):1)?(s=u>0?0:2*n.wsize,f.animate({scrollLeft:_(s-n.wsize)},a.fxspeed,function(){c[0>u/p?"next":"previous"](!0)}),w(b,u/p,!0)):(f.stop().animate({scrollLeft:_(0)},a.fxspeed),w(b,0,!0)),1==$TS_VCSC_Hammer_ReleaseNew?f.off("pan",i).off("panend release",r):f.off("drag",i).off("dragend",r)}if(o.gesture===t)return!1;if(n.isTouchDevice||(n.isTouchDevice=!(o.gesture.srcEvent.changedTouches===t)),n.zooming||!n.current||o.gesture===t)return!0;var s,l,h,u,p,f=e(this),g=(e(o.target),o.timeStamp,!1),m=n.wsize/3,v=n.current,b=v.css3,w=d.getFX(v.set[v.current].opts.effect,v.set[v.current]),y=w(0,0,0,1)!==t,_=function(e){return(y?w(0,0,0,e):e)+n.wsize};return l=o.gesture,1==$TS_VCSC_Hammer_ReleaseNew?f.on("pan",i).on("panend release",r):f.on("drag",i).on("dragend",r),!1},useTouch:function(e){1==$TS_VCSC_Hammer_ReleaseNew?e.hammer({prevent_default:!0}).on("swipeleft swiperight",d.swipeGesture):e.hammer({prevent_default:!0}).on("dragstart",d.swipeGesture)},disableTouch:function(e){1==$TS_VCSC_Hammer_ReleaseNew?e.hammer({prevent_default:!1}).off("swipeleft swiperight",d.swipeGesture):e.hammer({prevent_default:!1}).off("dragstart",d.swipeGesture)},pause:function(e){n.current.playing&&!n.current.paused&&((e===!0||"mouseover"==e.type)&&(n.current.paused=!0),c.play(!1))},resume:function(){!n.current.playing&&n.current.paused&&(c.play(!1),n.current.paused=!1)},openShare:function(t){if(n.current){var a,o=n.current,i=o.current,r=o.set[i];"nch-lb-icon-share"==t.target.className?r.share&&"block"==r.share.css("display")?(r.share.hide(),o.main.removeClass("nch-lb-sharing")):(o.main.addClass("nch-lb-sharing"),r.share||(r.share=a=e('<div class="nch-lb-share-btns"></div>').appendTo(e("li.nch-lb-share",o.blocks.menu)),d.shareButtons(a,o.opts.social,d.getMediaProperties(r))),r.share.show()):r.share&&(r.share.hide(),o.main.removeClass("nch-lb-sharing"))}},renderGrid:function(a){var o,i,n,r,s=a.opts,l=a.set,h=!1,u=[];if(s.grid&&!a.hasGrid){a.hasGrid=!0;var p=[],f=0,g=s.random;o=s.grid.split(",");for(var m in o)o[m]=parseInt(o[m]);d.need(a.set,d.getPreview,function(){for(var a in l)if(l[a].preview!==t&&(i=l[a].main.hide(),h||(h=i),"true"==l[a].opts.include)){if(n=e(l[a].preview).clone(!0).data("nch-lb-media",l[a]).click(c.open).get(0),n.title=l[a].opts.title?l[a].opts.title:"",n.groups=l[a].opts.groups?l[a].opts.groups:"",n.thumbnail=l[a].opts.thumbnail?l[a].opts.thumbnail:"",""!=n.groups){var d=n.groups.split(",");d.forEach(function(t){e.inArray(t,p)<0&&p.push(t)})}else f++;u.push(n)}if(p.length>0&&"true"==s.gridfilter){p.sort();var m=(e('<div id="nch-lb-toggle-'+g+'" class="nch-lb-toggle '+s.gridtogglestyle+'" data-grid="nch-lb-grid-'+g+'" data-filter="nch-lb-filter-'+g+'" data-showall="nch-lb-showall-'+g+'" data-random="'+g+'">'+s.gridtoggle+"</div>").insertBefore(h),e('<div id="nch-lb-showall-'+g+'" class="nch-lb-showall '+s.gridshowallstyle+'" data-grid="nch-lb-grid-'+g+'" data-filter="nch-lb-filter-'+g+'" data-random="'+g+'">'+s.gridshowall+"</div>").insertBefore(h),e('<select id="nch-lb-filter-'+g+'" class="nch-lb-filter" data-grid="nch-lb-grid-'+g+'" data-toggle="nch-lb-toggle-'+g+'" data-showall="nch-lb-showall-'+g+'" data-random="'+g+'" multiple="multiple"></select>').insertBefore(h));p.forEach(function(t){e('<option value="'+t+'">'+t+"</option>").appendTo(m)}),f>0&&e('<option value="NoGroups">'+s.gridnogroups+"</option>").appendTo(m)}e('<div id="nch-lb-grid-'+g+'" class="nch-lb-grid" data-filter="nch-lb-filter-'+g+'" data-toggle="nch-lb-toggle-'+g+'" data-random="'+g+'"></div>').insertAfter(h).append(r=e(u)),r.nchgrid({grid:o,margin:parseInt(s.gridspace),order:"true"==s.gridorder?!0:!1,captions:"true"==s.captions?!0:!1,linkGrid:!1,filter:"true"==s.gridfilter?!0:!1,random:s.random,selector:"nch-lb-filter-"+g,toggle:"nch-lb-toggle-"+g,showall:"nch-lb-showall-"+g,textAvailable:s.gridavailable,textSelected:s.gridselected,textNoGroups:s.gridnogroups,textToggle:s.gridtoggle,textToggleStyle:s.gridtogglestyle,textShowAll:s.gridshowall,textShowAllStyle:s.gridshowallstyle})})}},parseColor:function(e){for(var t,a=(e+"").split(/bg|\_|\-|\.|\&|\#/),o=0;o<a.length;o++)if((6==(t=a[o].length)||3==t)&&new RegExp("[a-f0-9]{"+t+"}").test(a[o]))return"#"+a[o];return!1},toggleZoom:function(){{var t=n.current,a=t.main,o="nch-lb-zooming",i=t.set[t.current];i.nsize}if(a.hasClass(o))n.zooming=!1,d.updateMediaLayout(i),t.blocks.zoom.find(".nch-lb-zoom-container").remove();else{n.zooming=!0;var r,s=new Image;s.onload=function(){r=d.pinch.call(e(s),"100%","100%").css({position:"absolute"}).addClass("nch-lb-zoom-container"),t.blocks.zoom.append(r)},s.src=i.target.src}a.toggleClass(o)},getMediaProperties:function(e){var t=e.opts,a=t.type,o={title:t.title||document.title,media:"html"!=a&&"ajax"!=a&&"video"!=a&&"audio"!=a?"image"==a||"iframe"==a?e.target.src:t.href:""};return o.url=l[a]&&(l[a].video||l[a].audio)||"iframe"==a?o.media:window.location.href,o},detachMedia:function(t){var a=t.group,o=a.main;e(".nch-lb-title",o).each(function(){e(this).html("")}),e(t.target).detach()},getInnerHeight:function(e,t){e.css({width:t,height:"auto"});var a=e.height();return e.css({height:"auto"}),a},getInnerWidth:function(e,t){e.css({height:t,width:1});var a=e[0].scrollWidth;return e.css({width:"auto"}),a},renderMedia:function(t){function a(a){t.html=a,t.target=e(a)[0],o()}function o(){p.attr("class","nch-lb-media").addClass("nch-lb-media-"+f.type).append(t.target),"audio"==f.type&&"true"==f.audiobaronly&&p.addClass("nch-lb-media-audiobaronly"),s.paused&&(c.play(!1),c.play(!1),s.paused=!1),d.updateMediaLayout(t)}var i,r,s=n.current,h=s.main,u=s.blocks,p=u.media,f=t.opts,g=f.type;e(".nch-lb-title",h).each(function(){e(this).html(f.title)}),u.loading.width(0),t.target?o():l[g]&&(l[g].video||l[g].audio)?(t.target=i=e(l[g].create(t)).get(0),r=function(){o(),this.onload&&(this.onload=function(){})},i.attachEvent?i.attachEvent("onload",r):i.onload=r,n.root.append(i)):"iframe"==g?(t.target=i=e(l[g].create(t)).get(0),o()):("html"==g||"ajax"==g)&&("html"==g?a(l[g].create(t)):l[g].create(t,a))},fitInto:function(e,t,a,o){var i,n,r=e/t,s=a/o;return r>s?(i=a>e?e:a,n=i/r):(n=o>t?t:o,i=n*r),[i,n]},updateMediaLayout:function(t){var a,o,i,r,s=!1,c=n.current,h=c.blocks,u=(h.preview,h.media),p=c.mspace.width,f=c.mspace.height,g=t.opts,m=g.type,v={top:0,left:0,width:0,height:0},b=t.nsize;if(n.zooming)return!0;if(l[m]&&(l[m].video||l[m].audio)&&(b=t.nsize=t.group.opts.size.split(",")),r=isNaN(g.width)||isNaN(g.height),"image"==m||l[m]&&(l[m].video||l[m].audio&&"false"==g.audiobaronly)){var w=b[0]/b[1];0==g.width&&0==g.height?(i=d.fitInto(b[0],b[1],p,f),v.width=i[0],v.height=i[1]):0==g.height?(v.width=p<g.width?p:g.width,v.height=v.width/w>f?(v.width=f*w)/w:v.width/w):0==g.width?(v.height=f<g.height?f:g.height,v.width=v.height*w>p?(v.height=p/w)*w:v.height*w):r||(i=d.fitInto(g.width/1,g.height/1,p,f),v.width=i[0],v.height=i[1])}else"iframe"==m||l[m]&&l[m].audio&&"true"==g.audiobaronly?(0==g.width?v.width=p:r||(v.width=g.width>p?p:g.width),l[m]&&l[m].audio&&"true"==g.audiobaronly&&v.width>parseInt(g.audiobarwidth)&&(v.width=parseInt(g.audiobarwidth)),0==g.height?v.height=f:r||(v.height=g.height>f?f:g.height)):("html"==m||"ajax"==m)&&t.target&&(s=!0,g.width>0&&(v.width=g.width>p?p:g.width),g.height>0&&(v.height=g.height>f?f:g.height));if(r&&(g.width/1?v.width=g.width/1:g.height/1&&(v.height=g.height/1),a=isNaN(g.width)?parseFloat(g.width)/100*p:0,o=isNaN(g.height)?parseFloat(g.height)/100*f:0,o&&a?(o||(o=a/b[0]*b[1]),a||(a=o*b[0]/b[1]),i=d.fitInto(a,o,p,f),v.width=i[0],v.height=i[1]):o?a=v.width?v.width:o*b[0]/b[1]:a&&(o=v.height?v.height:a/b[0]*b[1]),i=d.fitInto(a,o,p,f),v.width=i[0],v.height=i[1]),s){v.width||v.height||(v.width=Math.min(p,f));var y=e('<div style="display:block;position:relative;padding:1px"></div>').append(e(t.target).clone()).appendTo(n.root);v.width||(v.width=Math.min(d.getInnerWidth(y,v.height),p)),v.height||(v.height=Math.min(d.getInnerHeight(y,v.width),f)),y.remove()}if(v.top=n.mposy=(f-v.height)/2,v.left=n.wsize+c.mspace.left+(p-v.width)/2,t.group.main[("image"==m&&(b[0]>v.width||b[1]>v.height)&&c.opts.zoom?"add":"remove")+"Class"]("nch-lb-can-zoom"),u.css(v),"iframe"==m||l[m]&&(l[m].video||l[m].audio)){var _=e("iframe.nch-lb-iframe",u);_.height(isNaN(v.height)?"100%":v.height),_.width(isNaN(v.width)?"100%":v.width),l[m]&&l[m].audio&&"true"==g.audiobaronly&&_.css("max-width",g.audiobarwidth)}c.opts.notouch||("html"==m||"ajax"==m?c.hasGestures&&(d.disableTouch(h.preview),c.hasGestures=!1):c.hasGestures||(d.useTouch(h.preview),c.hasGestures=!0))},getMediaColor:function(e,t){var o=e.opts;return a.usecolor?t(a.backlight):o.color?t(o.color):void("image"==o.type&&n.hasCanvas?d.getMainColor(e.target,o,function(e){t("rgb("+e.join(",")+")")}):t(a.backlight))},enoughThumbs:function(e){for(var t=0,a=0;a<e.set.length;a++)e.set[a].opts.src&&t++;return t>1?!0:(e.opts.thumbs=!1,!1)},toMedia:function(t){function a(){t.group.main&&t.group.blocks.media.css({width:0,height:0}),0==t.group.main&&(d.renderLayout(t.group),d.selectThumb(t)),n.current!==t.group?(n.current&&s.close(n.current.group),n.current=t.group,n.current.current=t.index,s.open(t)):l=t.group.current,d.updateLayout(),r===!1?r=!0:r!==!0&&r()}function o(a){t.opts.type=a,n.onload=!1,d.renderMedia(t),d.updateMediaLayout(t),"image"==t.opts.type?((void 0==t.opts.share||"undefined"==t.opts.share)&&(t.opts.share=$TS_VCSC_Lightbox_Share),0==t.opts.share||0==t.opts.share||"false"==t.opts.share?e("li.nch-lb-share > .nch-lb-icon-share").hide():(1==t.opts.share||1==t.opts.share||"true"==t.opts.share)&&e("li.nch-lb-share > .nch-lb-icon-share").show()):void 0!=t.opts.share&&"undefined"!=t.opts.share?0==t.opts.share||0==t.opts.share||"false"==t.opts.share?e("li.nch-lb-share > .nch-lb-icon-share").hide():(1==t.opts.share||1==t.opts.share||"true"==t.opts.share)&&e("li.nch-lb-share > .nch-lb-icon-share").show():e("li.nch-lb-share > .nch-lb-icon-share").hide(),s.slideIn(t,function(){}),d.getMediaColor(t,function(e){function a(){d.light(t.opts.color)}t.opts.color=e,n.light===!1?n.event.on("maskload",a):a()}),n.current.current=t.index}var i,r=!1,l=!1;c.open.call(t),n.onload&&(n.onload.onload=function(){},n.onload=!1),d.enoughThumbs(t.group),n.current&&n.current==t.group&&(l=n.current.current)!==!1&&(n.phase=l&&t.index||l+t.index!=t.group.set.length-1?l<t.index:l>t.index),t.group.main&&d.selectThumb(t),n.zooming&&d.toggleZoom(),n.current?s.slideOut(i=n.current.set[n.current.current],function(){d.detachMedia(i),a()}):a(),d.getMediaType(t,function(e){var t=function(){0!=n.current&&d.detachMedia(n.current.set[n.current.current]),o(e)};r===!0?t():r=t})},renderLayout:function(t){var o,i=t.main=e('<div class="nch-lb-main"></div>').appendTo(n.b),r=t.opts,s="",l={};t.main.addClass("nch-lb-scheme-"+r.scheme),""==a.backlight&&t.main.addClass("nch-lb-no-backlight"),""!=r.overlay&&0!=r.overlay&&""!=r.repeat&&0!=r.repeat?""!=r.overlay&&0!=r.overlay?t.main.css("background",""+r.overlay+' url("'+r.background+'") '+r.repeat+" center center"):t.main.css("background",'#000000 url("'+r.background+'") '+r.repeat+" center center"):""!=r.overlay&&0!=r.overlay&&t.main.css("background",r.overlay),""!=r.noise&&0!=r.noise&&(t.noise=e('<div class="nch-lb-noise"></div>').appendTo(t.main),t.noise.css("background-image","url("+r.noise+")"));l.loadicon=e('<div class="nch-lb-media-loading"></div>').appendTo(i);r.info&&e("#"+r.info).length>0&&0==e("#"+r.info).text().length&&(e("#"+r.info).remove(),r.info=!1),n.canFS&&r.fullscreen&&(s+="nch-lb-can-fs "),r.share&&(s+="nch-lb-can-share "),r.play&&t.set.length>1&&(s+="nch-lb-can-play "),r.zoom&&(s+="nch-lb-can-zoom "),r.info&&(s+="nch-lb-has-info "),n.scrollbar||(s+="nch-lb-no-scrollbar "),i.addClass(s);var h={v:"vertical",h:"horizontal"},u={left:"v",right:"v",top:"h",bottom:"h"},p={v:"width",h:"height"};if(n.asb){var f=l.asb=e('<div class="nch-lb-pngfix"></div>').appendTo(i);d.css3(f).transition("background-color 500ms linear")}r.info&&(t.info=(o=e("#"+r.info)).length?o:e("<div></div>"));var g,m=l.tbar=e('<div class="nch-lb-tbar"></div>').appendTo(i),v=e('<ul class="nch-lb-tbar-controls"></ul>'),b=l.bbar=e('<div class="nch-lb-bar"></div>').appendTo(i),w=l.controls=e('<ul class="nch-lb-controls"></ul>').appendTo(b),y={prev:"left",play:"play",next:"right",title:!1,exit:"exit",fs:"fs",info:"info"},_={prev:"<",play:"p",next:">",title:"",exit:"x",fs:"f",info:"i"};1==t.set.length&&i.addClass("nch-lb-no-more");for(var x in y)w.append(g='<li class="nch-lb-'+x+'">'+(y[x]?'<div class="nch-lb-icon-'+y[x]+'">'+_[x]+"</div>":"")+"</li>"),("exit"==x||"title"==x||"info"==x||"fs"==x)&&v.append(g);if(r.thumbs){var C=l.thumbs=e('<ul class="nch-lb-thumbs"></ul>'),S=l.bthumbs=e('<div class="nch-lb-thumbs-bar"></div>').append(C);if(S.addClass("nch-lb-thumbs-"+r.thumbs).css(r.thumbs,0),C.addClass("nch-lb-thumbs-"+h[u[r.thumbs]]).css(p[u[r.thumbs]],r.thumbsize),"bottom"==r.thumbs?b.append(S):"top"==r.thumbs?m.append(S):i.append(S),"v"==u[r.thumbs]){var k={left:"auto",right:"auto"};k["left"==r.thumbs?"right":"left"]=S[p[u[r.thumbs]]](),m.css(k),b.css(k)}}v.appendTo(m);var T,z=l.preview=e('<div class="nch-lb-media-space"></div>').appendTo(i);if(r.closer){l.scroller=e('<div class="nch-lb-media-scroller"></div>').appendTo(z).append(T=l.media=e('<div class="nch-lb-media"><div class="nch-lb-exit-inner"><div class="nch-lb-icon-exit">x</div></div></div>'))}else{l.scroller=e('<div class="nch-lb-media-scroller"></div>').appendTo(z).append(T=l.media=e('<div class="nch-lb-media"></div>'))}t.css3=d.css3(T);for(var I=l.menu=e('<ul class="nch-lb-photo-menu"></ul>').appendTo(T),L=["zoom","share"],E=["+","h"],x=0;x<L.length;x++)I.append('<li class="nch-lb-'+L[x]+'"><div class="nch-lb-icon-'+L[x]+'">'+E[x]+"</li>");l.info=e('<div class="nch-lb-project"><div class="nch-lb-info-panel"><div class="nch-lb-icon-info">x</div></div></div>').appendTo(i),l.loading=e('<div class="nch-lb-loadbar"></div>').appendTo(i);T.on("mouseover",d.pause).on("mouseout",d.resume),t.blocks=l,r.thumbs&&d.need(t.set,d.getThumbnail,function(){d.renderThumbnails(t)});l.zoom=e('<div class="nch-lb-zoom-space"><div class="nch-lb-icon-zoom">-</div></div>').appendTo(i);r.autoplay&&(t.playing=!0,t.paused=!0,i.addClass("nch-lb-playing")),e("div.nch-lb-icon-fs",i).each(function(){e(this).click(d.fs.toggle)
}),e("li.nch-lb-exit",i).each(function(){e(this).click(c.close)}),r.closer&&e(".nch-lb-exit-inner",i).on("click touchstart",function(){c.close()}),e(document).on("click touchstart",".nch-lb-exit-custom",function(){c.close()}),e("li.nch-lb-prev",w).click(c.previous),e("li.nch-lb-next",w).click(c.next),e("li.nch-lb-play",w).click(c.play),e("div.nch-lb-icon-info",i).each(function(){e(this).click(d.toggleInfo)}),e("div.nch-lb-icon-zoom",i).on("click",d.toggleZoom),i.on("click",d.openShare),r.bgclose&&d.backgroundClose(l),a.tapping&&l.media.on("click",function(t){if(n.current){var a=e(t.target);a.is("img")&&a.parent().hasClass("nch-lb-media")&&c.next()}})},backgroundClose:function(e){e.preview.click(function(e){e.target.className.search("nch-lb-media-space")>=0&&c.close()})},fs:{on:!1,request:function(e){return d.fs.on=!0,"js"==$TS_VCSC_Lightbox_ScrollBlock&&jQuery("body, html").addClass("ts-composer-extensions-noscroll"),screenfull.request(e)},has:function(){var e=d.fs.request(document.documentElement);return 0!=e},exit:function(){var e=document;"js"==$TS_VCSC_Lightbox_ScrollBlock&&jQuery("body, html").removeClass("ts-composer-extensions-noscroll"),screenfull.exit(e),d.fs.on=!1},toggle:function(){var e="nch-lb-onfs",t=n.current.main,a=t.find(".nch-lb-icon-fs");d.fs.on?(t.removeClass(e),d.fs.exit(),a.html("f")):(t.addClass(e),d.fs.request(document.documentElement),a.html("k"))}},loadThumb:function(e,t){var a;this.thumb=a=new Image,a.onload=t,a.src=e},updateLayout:function(a){function o(){n.asb||p.append(n.light[0].$el.height(f[2]+100),n.light[1].$el.height(f[2]+100))}var i=n.current,r=n.wsize=n.w.width(),s=n.hsize=n.w.height();if(i){var l,c=i.blocks,h=c.preview,u=i.opts,p=u.margin,f=[p,p,p,p],p=i.main,g=c.bthumbs,m={top:0,right:1,bottom:2,left:3},v="height",b="width",w=[v,b,v,b];g!==t&&"bottom"!=u.thumbs&&"top"!=u.thumbs&&(f[m[u.thumbs]]+=g[w[m[u.thumbs]]]()),f[0]+=c.tbar.height(),f[2]+=c.bbar.height(),l={top:f[0],left:f[3],width:r-f[1]-f[3],height:s-f[0]-f[2]},c.bbar.width(l.width+2*u.margin),c.tbar.width(l.width+2*u.margin),h.css(e.extend({},l,{left:0,width:r,height:l.height+40})),c.loadicon.css({left:l.left+l.width/2,top:l.top+l.height/2}),i.mspace=l,n.hasCanvas&&(n.light?o():n.event.on("maskload",o)),0!=i.set[i.current].opts.type&&i.set[i.current].target&&d.updateMediaLayout(i.set[i.current]),a!==t&&h.scrollLeft(n.wsize)}},light:function(e,t){if(n.hasCanvas&&""!=n.current.opts.backlight){if(n.asb&&n.current){var a=n.current.blocks.asb.get(0);return void(a.style.backgroundColor=e)}var o=arguments,i={opacity:1,display:"block"},r={opacity:0},s=n.light[0],l=n.light[1];2==o.length?e.main.append(s.$el,l.canvas):t=e;var e=[0,0,l.width,l.height];"remove"===t?(s.$el.hide(),l.$el.hide()):(l.$el.stop().animate(r,500,function(){d.toColor(l,t),l.$el.css(i),s.$el.hide()}),d.toColor(s,t),s.$el.stop().show().css(r).animate(i,500))}},toColor:function(e,t){var a=e.width,o=e.height,i=e.context;i.clearRect(0,0,a,o),i.fillStyle=t,i.fillRect(0,0,a,o),e.mask()},masks:function(){var t=this,a=(e("div.nch-lb-mask"),e('<canvas class="nch-lb-effcurrent"></canvas>')),o=e('<canvas class="nch-lb-effchange"></canvas>');n.color="#000000",n.light=n.asb?[]:[new d.canvasMask(a,t),new d.canvasMask(o,t)],n.event.trigger("maskload")},getImageURL:function(e){var t=/^url\((['"]?)(.*)\1\)$/.exec(e.css("background-image"));return t?t[2]:""},hashChange:function(){var e="";window.setInterval(function(){a.nohashes&&n.hash!=e&&0==(e=n.hash).search("#"+a.hashpath)&&d.route(e.replace("#","")),e!=window.location.hash&&0==(e=n.hash=window.location.hash).search("#"+a.hashpath)&&d.route(e.replace("#",""))},150)},route:function(e){if(i[e]!==t){var a=i[e];d.toMedia(a.call!=t?a():a)}},addRoute:function(e,t){i["nch_"+e]=t},isImage:function(e,o,i){var r=new Image,s=function(){o("image")};r.onerror=i||function(){d.getMediaType(e,o,!0)},r.onload=function(){e.target=this,e.nsize=[this.width,this.height],"remove"==e.opts.color||0!=e.opts.color&&"auto"!=e.opts.color?o("image"):i===t&&!d.allowedOrigin(this,e.opts)&&(a.cors&&""!=a.backlight&&"global"==e.opts.usecors||"true"==e.opts.usecors&&"remove"!=e.opts.color)?d.isImage(e,o,s):o("image")},i!==t&&0==e.opts.color&&(r.crossOrigin="Anonymous"),r.src=e.opts.href,n.onload=r},getMediaType:function(e,a,o){var i=e.opts;if(0!=i.type)return e.target||l[i.type]&&l[i.type].video&&i.videoid===t&&l[i.type].is(e),a(i.type);if(o){for(var o in l)if(l[o].is(e))return a(o)}else d.isImage.apply(this,arguments)},need:function(e,t,a){for(var o=e.length-1,i=0,n=function(){i++==o&&a()},r=0;o>=r;r++)t(e[r],n)},getPreview:function(e,a){var o=new Image,i=e.opts,n=i.type,r=function(){a(e)};return e.preview!==t?a(e):void(i.src?(o.onload=r,o.src=i.src,e.preview=o):l[n]&&(l[n].video||l[n].audio)?(e.opts.videoid===t&&l[n].is(e),l[n].preview(e,r)):a(e))},getThumbnail:function(e,a){var o=new Image,i=e.opts,n=i.type,r=function(){a(e)};return e.thumb!==t?a(e):void(i.thumbnail?(o.onload=r,o.src=i.thumbnail,e.thumb=o):i.src?(o.onload=r,o.src=i.src,e.thumb=o):l[n]&&(l[n].video||l[n].audio)?(e.opts.videoid===t&&l[n].is(e),l[n].thumb(e,r)):a(e))},renderThumbnails:function(a){var o,i,n,r=(a.main,a.opts),s=a.blocks,l=s.thumbs.empty(),h=0,u={bottom:1,top:1,left:0,right:0};l[u[a.opts.thumbs]?"height":"width"](a.opts.thumbsize),window.setTimeout(function(){for(var o in a.set)(i=a.set[o].thumb)!==t&&(n=(i.naturalWidth||i.width)/(i.naturalHeight||i.height),h+=r.thumbsize*(u[a.opts.thumbs]?n:1/n)+8,l.append(e("<li></li>").append(e(a.set[o].thumb).removeAttr("width","height").data("nch-lb-media",a.set[o]).click(c.open))));l[u[a.opts.thumbs]?"width":"height"](h-6)},25),o=new Hammer(l.get(0),{prevent_default:!1}),"left"==r.thumbs||"right"==r.thumbs?(1==$TS_VCSC_Hammer_ReleaseNew&&o.get("swipe").set({direction:Hammer.DIRECTION_ALL}),o.on("swipeup swipedown",function(e){return d.swipeThumbs(e),!0})):o.on("swipeleft swiperight",function(e){return d.swipeThumbs(e),!0}),l.TS_VCSC_MouseWheel(d.scrollThumbs)},getFX:function(e,t){if(e===!1&&(t.opts.effect=e=t.group.opts.animation),"random"==e){var a=[];for(var o in r)a.push(o);t.opts.effect=t.opts.animation=e=a[Math.round(Math.random()*(a.length-1))]}return r[e]||function(){}},mediaGroup:function(t,o){var n,r,s,l=this;o||(o=d.randomName()),this.main=!1,this.name=n=o,this.opts=r=e.extend({},a,t),this.current=!1,this.set=[],this.playing=!1,this.paused=!1,this.about=!1,this.hasGestures=!1,this.add=function(e,t){var o=new d.mediaItem(e,d.inheritProps(r,t));o.group=l,o.opts.rel=n,o.index=l.set.length,o.opts.href||(o.opts.href=o.opts.src),(s=d.parseColor(o.opts.href+o.opts.src))&&(o.opts.color=s),i[a.hashpath+o.opts.hash]=o,l.set.push(o)}},allowedOrigin:function(t,a){if(!n.hasCanvas)return!0;var o=n.tcanvas,i=o.getContext("2d"),r=o.width,s=o.height;if(i.clearRect(0,0,r,s),i.drawImage(t,0,0),""==n.current.opts.backlight||"remove"==a.color)return e(n.tcanvas).remove(),e(n.tcanvas=document.createElement("canvas")).addClass("nch-lb-testcanvas").appendTo(n.b),!1;try{i.getImageData(0,0,1,1)}catch(l){return e(n.tcanvas).remove(),e(n.tcanvas=document.createElement("canvas")).addClass("nch-lb-testcanvas").appendTo(n.b),!1}return!0},inheritProps:function(e,a){for(var o in e)a[o]!==t&&(e[o]=a[o]);return a},mediaItem:function(t,a){var i;this.main=t,this.opts=i=e.extend({hash:d.getHash(a)},o,a),this.target=!1,this.share=!1,t.data("nch-lb-media",this),t.click(function(e){return e.preventDefault(),c.open.call(this),!1})},keyboard:function(e){var t=e.which,a=n.current;a&&a.opts.keyboard&&(32==t&&a.opts.play&&c.play(),37==t&&c.previous(!0),39==t&&c.next(!0),27==t&&c.close())},setFrom:function(a,o){var i,r=e(),s=new d.mediaGroup(o);for(var l in a)a[l].charAt!==t&&(a[l]={href:a[l]}),i=e('<a href="'+a[l].href+'"></a>'),a[l].src&&i.append('<img src="'+a[l].src+'">'),s.add(i,a[l]),r=r.add(i);return n.all[s.name]=s,r},randomName:function(){return"nch_group_"+Math.round(Math.random()*(new Date).getTime())},getHash:function(e){{var o,n,r=e.href?e.href:e.href=e.src,s=0;e.hash?1:0}if(r===t||0==(r+"").length)return s;for(o=0;o<r.length;o++)n=r.charCodeAt(o),s=(s<<5)-s+n,s&=s;if(s=Math.abs(s),i[a.hashpath+s]!==t)for(;i[a.hashpath+s]!==t;)s++;return s},getDataProperties:function(t){t.jquery&&(t=t.get(0));for(var a,o=arguments,i=o[1]?o[1]:[],n={},r=0;r<t.attributes.length;r++){var s=t.attributes[r].name;(i[s]||e.inArray(s,i)>=0||0==s.search("data-"))&&(n[i[s]?i[s]:s.replace("data-","")]=(a=t.getAttribute(s))==parseInt(a)?parseInt(a):a)}return n},canvasMask:function(e,t){if(n.hasCanvas){var a,o,i;this.$el=e,this.canvas=e=e.get(0),this.context=a=e.getContext("2d"),this.mask=t,this.width=o=e.width=t.width,this.height=i=e.height=t.height,a.drawImage(t,0,0),this.maskdata=function(e){for(var t=[],a=0,n=0;i>n;n++)for(var r=0;o>r;r++,a+=4)t.push(e.data[a]);return t}(a.getImageData(0,0,o,i)),a.clearRect(0,0,o,i),this.mask=function(){for(var e=this.maskdata,t=4*e.length,n=0,r=a.getImageData(0,0,o,i);t>n;)r.data[n+3]*=e[n/4]/255,n+=4;a.putImageData(r,0,0)}}},hexToRGB:function(e){var t=e.replace("#",""),a=t.match(/.{1,1}/g);t.length/3<2&&(t=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),t=t.match(/.{1,2}/g);for(var o=0;3>o;o++)t[o]=parseInt(t[o],16);return t},drawImageOnto:function(e,t,a,o,i,n,r){var s=this,l=arguments;try{e.drawImage(t,a,o,i,n)}catch(c){return void window.setTimeout(function(){d.drawImageOnto.apply(s,l)},0)}r()},getMainColor:function(e,t,a){var o,i,r,s=document.createElement("canvas"),l=s.getContext("2d"),c=0,h=0,u=s.width=200,p=s.height=200,f=[0,0,0],g=d.hexToRGB(n.current.opts.backlight);return s.getContext&&l&&"remove"!=t.color?void d.drawImageOnto(l,e,0,0,200,200,function(){if(""==n.current.opts.backlight)return a(g);try{o=l.getImageData(0,0,u,p)}catch(e){return a(g)}for(var t=0;p>t;t++)for(var s=0;u>s;s++)i=(o.data[c]+o.data[c+1]+o.data[c+2])/3,r=Math.abs(i-o.data[c])+Math.abs(i-o.data[c+1])+Math.abs(i-o.data[c+1]),r>h&&(h=r,f=[o.data[c],o.data[c+1],o.data[c+2]]),c+=4;a(f)}):a(g)}};e.fn.nchlightbox=function(e){return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):c.init.apply(this,arguments)},e.fn.nchlightbox.defaults=a,e(document).ready(function(){e(".nch-hide-if-javascript").hide(),n.b=e("body"),n.w=e(window).resize(d.updateLayout),n.doc=e(document.documentElement),d.hashChange();var o=e('<div id="nchlb_touch_device"></div>');n.b.append(o),o.position().top<0&&(n.isTouchDevice=!0),o.remove();try{("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(n.isTouchDevice=!0)}catch(i){}n.isTouchDevice&&n.b.addClass("nch-lb-photo-menu-visible");var r;n.asb=(r=navigator.userAgent.toLowerCase()).search("android")>0&&r.search("mobile safari")>0&&r.search("linux")>0&&r.search("chrome")<0;var s=document.createElement("canvas"),i=n.root=e('<div class="nch-lb-mask"></div>').appendTo(n.b);(n.hasCanvas=!(!s.getContext||!s.getContext("2d")))&&""!=a.backlight?(h=new Image,h.onload=d.masks,h.src=d.getImageURL(i),e(n.tcanvas=document.createElement("canvas")).addClass("nch-lb-testcanvas").appendTo(n.b)):(n.hasCanvas=!1,d.masks()),n.canFS=screenfull.enabled,d.fs.on=!1,n.w.keyup(d.keyboard);var l=e('<div class="nch-lb-scrollbars"></div>').appendTo(n.b),c=l.get(0).clientWidth,u=l.get(0).offsetWidth;c!==t&&u!==t&&u==c&&(n.scrollbar=!1),l.remove(),e(".nch-lightbox").nchlightbox()})}(jQuery),function(e,t,a,o){function i(e){for(var t=e.split("-"),a=1;a<t.length;a++)t[a]=t[a].substr(0,1).toUpperCase()+t[a].substr(1);return t.join("")}function n(e,t){var n,r=e,s=t||["ms","O","Moz","Webkit","Khtml"],c=(e=i(r)).substr(0,1).toUpperCase()+e.substr(1),h=a.documentElement;if(h.style[e]!==o)return l[r]=r,e;n=(s.join(c+"/")+c).split("/");for(var d in n)if(h.style[n[d]]!==o)return l[r]="-"+s[d].toLowerCase()+"-"+r,n[d];return!1}var r={},s={},l={},c={rotate:"deg",rotateX:"deg",rotateY:"deg",skewX:"deg",skewY:"deg",perspective:"px",scale:"",translateX:"px",translateY:"px",translateZ:"px"};!function(){for(var e=arguments,t=0;t<e.length;t++)s[e[t]]=n(e[t])}("transform","perspective","transition","transform-origin"),r.transform=function(e,t){var a=t===o?e:function(a){return a[e]=t,a}({}),i=[];if(s.transform!==!1){for(var n in a)c[n]!==o&&(a[n]+"").search(c[n])<0&&(a[n]+=c[n]),i.push(n+"("+a[n]+")");this.style[s.transform]=i.join(" ")}},r.transition=function(e){this.style.setProperty===o?this.style[s.transition]=e:this.style.setProperty(l.transition,e)},r.transformOrigin=function(e){this.style.setProperty===o?this.style[s["transform-origin"]]=e:this.style.setProperty(l["transform-origin"],e)},r.perspective=function(e){s.perspective!==!1&&((e+"").search(c.perspective)<0&&(e+=c.perspective),this.style.setProperty===o?this.style[s.perspective]=e:this.style.setProperty(l.perspective,e))},r.animate=function(e,a,i){var n=this,a=a||400,s=[l.transform].join(",")+" "+a/1e3+"s ease-in";r.transition.call(this,s),r.transform.call(this,e),t.setTimeout(function(){r.transition.call(n,"none"),i!==o&&i()},a)},e.fn.nchlightbox("access","css3",function(e){return new function(e){var t=this;this.el=e.jquery===o?e:(this.$el=e).get(0);for(var a in r)this[a]=function(e){return function(){r[e].apply(t.el,arguments)}}(a)}(e)})}(jQuery,window,document),function(e,t){function a(a,o,i){return function(n,r,s,l){if(l!==t)return 1==i?t:i*l;var c=o(r,Math.abs(r)),h=[c[0]];n.transformOrigin(c[2]||d),s&&h.push(a.fxspeed),c[0]!==t&&n[s?"animate":"transform"].apply({},h),c[1]!==t&&(h[0]=c[1],e.fn[s?"animate":"css"].apply(n.$el.stop(),h))}}var o="perspective",i="skewX",n="rotate",r="rotateX",s="rotateY",l="translateY",c="translateZ",h="opacity",d="50% 50%",u=e.fn.nchlightbox.defaults,p="scale";e.fn.nchlightbox("fx",{swipe:function(){},fade:a(u,function(e,a){var o={};return o[h]=1-a,[t,o]},1),scale:a(u,function(e,t){var a={};return a[p]=1-.6*t,[a]},1),slideUp:a(u,function(e){var t={};return t[l]=900*e,[t]},0),slideDown:a(u,function(e){var t={};return t[l]=-900*e,[t]},0),flip:a(u,function(e){var t={};return t[o]=1e3,t[s]=90*e,[t]},0),skew:a(u,function(e){var t={};return t[o]=1e3,t[i]=30*e,[t]},1),bounceDown:a(u,function(e,t){var a={};return a[o]=100,a[l]=1e3*t,[a]},1),bounceUp:a(u,function(e,t){var a={};return a[o]=100,a[l]=-1e3*t,[a]},1),hangLeft:a(u,function(e){var a={};return a[n]=-179*e,[a,t,"0% 0%"]},0),hangRight:a(u,function(e){var a={};return a[n]=-179*e,[a,t,"100% 0%"]},0),zoomIn:a(u,function(e,t){var a={},i={};return a[o]=800,a[c]=800*t,a[n]=45*e,i[h]=1-t,[a,i]},0),simpleFade:a(u,function(e,a){var o={};return o[h]=1-a,[t,o]},0),simpleSwitch:a(u,function(){var e={};return e[h]=1,[t,e]},0),breakIn:a(u,function(e){var t={};return t[n]=45*e,[t]},1),rotateIn:a(u,function(e,t){var a={};return a[o]=1e3,a[s]=90*e,a[p]=1-.3*t,[a]},1),rotateOut:a(u,function(e,t){var a={};return a[o]=1e3,a[s]=-90*e,a[p]=1-.3*t,[a]},1),cicleDown:a(u,function(e,t){var a={},i={};return a[o]=1200,a[r]=-90*e,a[l]=200*t,i[h]=1-t,[a,i,"50% 100%"]},0),cicleUp:a(u,function(e,t){var a={},i={};return a[o]=1200,a[r]=-90*e,a[l]=-200*t,i[h]=1-t,[a,i,"50% 1%"]},0),throwIn:a(u,function(e,t){var a={},i={};return a[o]=800,a[p]=1-.6*t,a[n]=180*e,i[h]=1-t,[a,i]},.3),fall:a(u,function(e,t){var a={},i={};return a[o]=1800,a[r]=-90*t,a[n]=90*e,a[c]=-400*e,i[h]=Math.pow(1-t,.25),[a,i,d]},0),jump:a(u,function(e,t){var a={};return a[o]=1500,a[p]=1-.999*t,a[l]=300*t,a[r]=100*t,a[c]=1e3*t,[a]},0)})}(jQuery),function(e){function t(e,t){for(var a="",o=!1,i="",n=0;n<e.length;n++)o?"}"==e.charAt(n)?(t[i]&&(a+=t[i]),o=!1,i=""):i+=e.charAt(n):"{"==e.charAt(n)?o=!0:a+=e.charAt(n);return a}function a(e){return"undefined"==typeof e.has.charAt?e.has():"undefined"!=typeof window[e.has]?!0:!1}function o(e){var t=document.createElement("script");t.async=!0,t.id=e.id,t.src=e.src,n.append(t)}function i(e,o,i){for(var n,o=o.split(","),s="",l=[],c=0;c<o.length;c++)(l[c]=a(n=r[o[c]]))&&(s+=t(n.create,i));e.append(s);for(var c in o)l[c]&&r[o[c]].parse(r[o[c]].api(),e.get(0))}var n,r={fb:{has:"FB",code:"fb",api:function(){return FB},parse:function(e,t){e.XFBML.parse(t)},id:"facebook-jssdk",src:"//connect.facebook.net/en_US/all.js",create:'<div class="nchlb_like_container" data-share-nacho="true"><iframe class="fb-like" src="//www.facebook.com/plugins/like.php?layout=standard&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=20&amp;href={url}" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:20px;" allowTransparency="true"></iframe></div>'},tw:{has:"twttr",code:"tw",api:function(){return twttr},parse:function(e,t){e.widgets.load(t)},id:"twitter-wjs",src:"//platform.twitter.com/widgets.js",create:'<div class="nchlb_twitter_container" data-share-nacho="true"><a href="https://twitter.com/share" class="twitter-share-button" data-url="{url}" data-text="{title}" data-count="none">Tweet</a></div>'},gp:{has:function(){return"undefined"==typeof gapi||"undefined"==typeof gapi.plusone?!1:!0},code:"gp",api:function(){return gapi.plusone},parse:function(e,t){e.go(t)},id:"",src:"//apis.google.com/js/plusone.js",create:'<div class="nchlb_google_container" data-share-nacho="true"><div class="g-plusone" data-share-nacho="true" data-size="medium" data-annotation="none" data-href="{url}"></div></div>'},pin:{has:function(){for(var e in window)if(0==e.search("PIN_"))return!0;return!1},code:"pin",api:function(){for(var e in window)if(0==e.search("PIN_")&&window[e].f)return window[e]},parse:function(t,a){for(var o,i=e(a).is("a")?[a]:a.getElementsByTagName("a"),n=t.f.render,r=0;r<i.length;r++)"undefined"!=typeof(o=e(i[r]).attr("data-pin-do"))&&0!=e(i[r]).parent(".nchlb_pinterest_container").length&&"undefined"!=n&&void 0!=n&&n[o](i[r])},id:"",src:"//assets.pinterest.com/js/pinit.js",create:'<div class="nchlb_pinterest_container" data-share-nacho="true"><a href="//pinterest.com/pin/create/button/?url={url}&media={media}&description={title}" data-pin-do="buttonPin" data-pin-config="none"><img src="//assets.pinterest.com/images/pidgets/pin_it_button.png" /></a></div>'}};e(window).load(function(){if($TS_VCSC_Lightbox_LoadAPIs){var t,s=$TS_VCSC_Lightbox_Social.split(",");n=e("body");for(var l in r)t=r[l],e.inArray(t.code,s)>=0&&(a(t)||o(t))}e.fn.nchlightbox("access","shareButtons",i)})}(jQuery),function(e,t,a){var o={grid:function(t,a){this.name="",this.set=t,this.opts=e.extend({},e.fn.nchgrid.defaults,a),this.images=[],this.items=[],this.cols=[],this.width=0,this.columns=0,this.filters=[],a.target||(this.opts.target=e(t.parent()))},column:function(){this.images=[],this.height=0,this.width=0,this.aspect=0,this.less=!1,this.addImage=function(e){this.images.push(e),this.aspect+=e.aspect}},getColumns:function(e,t){for(var a=0;t[a]<e;)a++;return a==t.length?a:a+1},resolveDeltaHeight:function(e,t,a,o){return(e+t*o)/(a+o)},spreadImages:function(e,t){var o=e.images,i=o.length;if(e.opts.order)for(var n=0;i>n;n++)t[n%e.columns].addImage(o[n]);else{for(var r,s=o.length,l=0,c=e.columns,h=[],n=0;c>n;n++)h.push({index:h.length,aspect:0});for(;s>l;){r=[];for(var n=0;c>n;n++)o[l+n]!=a&&r.push({aspect:1/o[l+n].aspect,index:l+n});r.sort(function(e,t){return e.aspect>t.aspect}),h.sort(function(e,t){return e.aspect<t.aspect});for(var n=0;n<r.length;n++)t[h[n].index].addImage(o[r[n].index]),h[n].aspect+=r[n].aspect;l+=c}}},renderGrid:function(t){var a=function(){o.updateGrid(t)};e(window).resize(a),jQuery(window).on("debouncedresize",function(){window.setTimeout(function(){a()},750)}),a(),window.setTimeout(function(){jQuery(window).trigger("debouncedresize")},750)},filterGrid:function(t,a){var i=t.opts,n=(t.set,t.images,t.cols),r=i.target.width();t.columns=o.getColumns(t.width=r,i.grid);var s=a.split(",");if(t.columns!=n.length){n=[];for(var l=0;l<t.columns;l++)n[l]=new o.column;o.spreadImages(t,n)}for(var l=0;l<n.length;l++){c=n[l],all=c.images;for(var h=0;h<all.length;h++)image=e(t.items[all[h].index]),groups=e.trim(image.attr("data-groups")),valid=!1,s.forEach(function(e){o.searchGrid(groups,e)&&(valid=!0)}),valid?(image.removeClass("nchgrid-tile-filtered"),image.attr("data-showing","true")):(image.addClass("nchgrid-tile-filtered"),image.attr("data-showing","false"))}},searchGrid:function(e,t){return new RegExp("\\b"+t+"\\b","i").test(e)},updateGrid:function(t){var a=t.opts,i=(t.set,t.images),n=a.target,r=t.cols,s=a.target.width();if(t.width!=s){if(t.columns=o.getColumns(t.width=s,a.grid),t.columns!=r.length){r=[];for(var l=0;l<t.columns;l++)r[l]=new o.column;o.spreadImages(t,r)}for(var c=t.width-(r.length-1)*a.margin,h=Math.floor(i.length/t.columns),d=0,u=0,l=0;l<t.columns;l++)(r[l].less=r[l].images.length==h)?d+=1/r[l].aspect:u+=1/r[l].aspect;for(var p,f,g,m=o.resolveDeltaHeight(c,a.margin,d,u),v=0,b=0,l=0;l<r.length;l++){f=r[l],all=f.images,p=1/f.aspect*(m-(f.less?0:a.margin)),b=0;for(var w=0;w<all.length;w++)g=e(t.items[all[w].index]).css({position:"absolute",left:v,top:b,width:p,height:p*all[w].aspect,display:"block"}).addClass("nchgrid-tile"),b+=p*all[w].aspect+a.margin;v+=p+a.margin}n.height(b-a.margin),"static"==n.css("position")&&n.css("position","relative")}},triggerClick:function(t){if(t.preventDefault(),!e(t.target).is("img"))if(""!=e(this).find("img").attr("data-link")&&void 0!==e(this).find("img").attr("data-link")){var a=e(this).find("img").attr("data-link"),o=e(this).find("img").attr("data-target");e.trim(o).length>0?window.open(a,o):window.location.href=a}else if(""!=e(this).find("img").attr("data-image")&&void 0!==e(this).find("img").attr("data-image")){var i=e(this).find("img").attr("data-image"),n=e(this).find("img").attr("title");e.fn.nchlightbox([{href:i,title:n}],"")}else e(this).find("img").click()},loadTiles:function(){function t(t,n,r){var s,l,c,h,d,u,p;a.images[t]={width:n,height:r,aspect:r/n,src:a.set[t].src,index:t,caption:l=a.set[t].title,thumbnail:p=a.set[t].thumbnail,groups:c=a.opts.linkGrid?e(a.set[t]).attr("data-groups"):a.set[t].groups,links:h=a.opts.linkGrid?e(a.set[t]).attr("data-link"):"",image:d=a.opts.linkGrid?e(a.set[t]).attr("data-image"):""},u=""!=h?"":""!=d?"nchgrid-lightbox":"nchgrid-nolink",a.items[t]=""!=c?(s=e('<div class="nchgrid-item '+u+'" data-thumbnail="'+p+'" data-groups="All,'+c+'" data-showing="true"></div>').insertAfter(a.set[t]).append(a.set[t])).get(0):(s=e('<div class="nchgrid-item '+u+'" data-thumbnail="'+p+'" data-groups="All,NoGroups" data-showing="true"></div>').insertAfter(a.set[t]).append(a.set[t])).get(0),a.opts.captions&&(l+"").length?s.append('<div class="nchgrid-caption"></div><div class="nchgrid-caption-text '+(a.opts.titles?"nchgrid-caption-text-always":"")+'">'+l+"</div>").click(o.triggerClick):s.append('<div class="nchgrid-caption"></div>').click(o.triggerClick),i++==a.set.length-1&&o.renderGrid(a)}var a=this,i=0,n=[],r=0,s=a.opts.random;if(this.set.each(function(o,i){var s=new Image;if(a.opts.linkGrid)if(""!=e(a.set[o]).attr("data-groups")){var l=e(a.set[o]).attr("data-groups").split(",");l.forEach(function(t){e.inArray(t,n)<0&&n.push(t)})}else r++;s.onload=function(){t(o,this.width,this.height),i.style.display="block"},s.src=this.src,i.style.display="none"}),a.opts.linkGrid&&n.length>0&&a.opts.filter){n.sort();var l=e('<div id="nch-lb-toggle-'+s+'" class="nch-lb-toggle '+a.opts.textToggleStyle+'" data-grid="nch-lb-grid-'+s+'" data-filter="nch-lb-filter-'+s+'" data-showall="nch-lb-showall-'+s+'" data-random="'+s+'">'+a.opts.textToggle+"</div>").insertBefore(a.opts.target),c=e('<div id="nch-lb-showall-'+s+'" class="nch-lb-showall '+a.opts.textShowAllStyle+'" data-grid="nch-lb-grid-'+s+'" data-filter="nch-lb-filter-'+s+'" data-random="'+s+'">'+a.opts.textShowAll+"</div>").insertBefore(a.opts.target),h=e('<select id="nch-lb-filter-'+s+'" class="nch-lb-filter" data-grid="nch-lb-grid-'+s+'" data-toggle="nch-lb-toggle-'+s+'" data-showall="nch-lb-showall-'+s+'" data-random="'+s+'" multiple="multiple"></select>').insertBefore(a.opts.target);n.forEach(function(t){e('<option value="'+t+'">'+t+"</option>").appendTo(h)}),r>0&&e('<option value="NoGroups">'+a.opts.textNoGroups+"</option>").appendTo(h)}if(a.opts.filter&&""!=a.opts.selector){var d=e("#"+a.opts.selector);"undefined"!=typeof jQuery.fn.multiSelect&&d.multiSelect({selectableHeader:"<div class='ms-header-selectable'>"+a.opts.textAvailable+"</div>",selectionHeader:"<div class='ms-header-selection'>"+a.opts.textSelected+"</div>",afterSelect:function(){},afterDeselect:function(){}}),d.on("change",function(){o.filterGrid(a,e.trim(d.val())),""!=d.val()&&null!=d.val()?c.show():c.hide()});var l=e("#"+a.opts.toggle),c=e("#"+a.opts.showall),h=e("#ms-"+a.opts.selector);h.slideToggle(),c.hide(),l.on("click",function(){h.slideToggle()}),c.on("click",function(){d.multiSelect("deselect_all")})}}},i={init:function(t){var a=this;if(!this.length){var i,n=arguments,r=t,s=[];t=e.extend({},e.fn.nchgrid.defaults,2==n.length?n[1]:{});for(var l=0;l<r.length;l++)i=new Image,i.src=r[l],s.push(i);a=this.add(s).appendTo(t.target)}return o.loadTiles.call(new o.grid(a,e.extend({},e.fn.nchgrid.defaults,t||{}))),a}};e.fn.nchgrid=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):i.init.apply(this,arguments)},e.fn.nchgrid.defaults={margin:4,grid:[240,480,720,960,1240],captions:!1,order:!1,target:!1,linkGrid:!1,random:"",filter:!1,titles:!1,selector:"",toggle:"",showall:"",textAvailable:"Available Groups",textSelected:"Filtered Groups",textNoGroups:"No Groups",textToggle:"Toggle Filter",textToggleStyle:"",textShowAll:"Show All",textShowAllStyle:""}}(jQuery,window),function(e,t,a,o){function i(e){1==$TS_VCSC_Hammer_ReleaseNew?(2==(e.srcEvent.type+"").split("touch").length&&(l=!0),c.off("tap",i)):(2==(e.gesture.srcEvent.type+"").split("touch").length&&(l=!0),c.off("touch",i))}function n(t,a,i){function n(){w.cwidth=w.container.width(),w.cheight=w.container.height()}function r(e,t){t=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var a="",o=0;e>o;o++){var i=Math.floor(Math.random()*t.length);a+=t.substring(i,i+1)}return a}function c(e){return e=e===o?1:e,{e:[e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1]}}function h(e){return e.e.join(", ")}function d(e){var t=w.width*e-w.cwidth,a=w.height*e-w.cheight;E=-Math.abs(0>t?0:t),$=-Math.abs(0>a?0:a)}var u,p,f,g=1,m=0,v=0,b=!1,w=this,y="nch-lb-zoom-container-"+r(10);this._el=s(t),this.$el=t.css({display:"block"}),this.container=f=e('<div id="'+y+'"></div>').insertAfter(t).append(t),this._container=1==$TS_VCSC_Hammer_ReleaseNew?new Hammer.Manager(f.get(0),{recognizers:[[Hammer.Press,{enable:!1}],[Hammer.Rotate,{enable:!1}],[Hammer.Tap,{enable:!1}],[Hammer.Swipe,{enable:!1}],[Hammer.Pan,{enable:!0}],[Hammer.Pinch,{enable:!0}]]}):f.hammer({prevent_default:!0}),this.width=t.get(0).width||t.width(),this.height=t.get(0).height||t.height(),this.scale=1,this.centerX=.5,this.centerY=.5,this.translateX=0,this.translateY=0,this.transform=w.transform=c(),this._el.transformOrigin("0 0"),this.container.css({width:a||this.width,height:i||this.height,overflow:l?"hidden":"auto"});var _,x,C,S,k,T,z,I,m=0,v=0,L=0,E=0,$=0,F=0,A=0,M=0,N=!1,j=!1;n(),this.transformStart=function(e){j&&(j=!1,w.dragEnd(e)),n(),N=!0,1==$TS_VCSC_Hammer_ReleaseNew?(_=e.center.x,x=e.center.y):(_=e.gesture.center.pageX,x=e.gesture.center.pageY),C=f.scrollLeft(),S=f.scrollTop(),k=f.offset(),T=k.left,z=k.top,w.centerX=u=(_-T-m-A)/w.width/w.scale,u=0>u?0:u>1?1:u,w.centerY=p=(x-z-v-M)/w.height/w.scale,p=0>p?0:p>1?1:p},this.drag=function(e){if(!N){1==$TS_VCSC_Hammer_ReleaseNew?(A=e.deltaX+m+L,M=e.deltaY+v+F):(b=e.gesture,A=b.deltaX+m+L,M=b.deltaY+v+F),d(g);var t=c(g);t.e[12]=A=0>A?A>E?A:E:0,t.e[13]=M=0>M?M>$?M:$:0,w._el.transform("matrix3d",h(I=t))}},this.pinch=function(e){N=!0,b=1==$TS_VCSC_Hammer_ReleaseNew?e:e.gesture,g=w.scale*b.scale,1>g&&(g=1),g>5&&(g=5),d(g),L=(w.scale-g)*w.width*w.centerX+m+A,F=(w.scale-g)*w.height*w.centerY+v+A;var t=c(g);t.e[12]=L=0>L?L>E?L:E:0,t.e[13]=F=0>F?F>$?F:$:0,w._el.transform("matrix3d",h(I=t))},this.transformEnd=function(){w.scale=g,w.transform=I,N=!0,m=L,v=F,A=M=L=F=0},this.dragEnd=function(){return j=!1,N?void(N=!1):(w.transform=I,m=A,v=M,void(L=F=A=M=0))},this.dragStart=function(){n(),N||(N=!1,j=!0)},l&&(1==$TS_VCSC_Hammer_ReleaseNew?this._container.on("pinchstart",this.transformStart).on("pinch",this.pinch).on("pinchend",this.transformEnd).on("panstart",this.dragStart).on("pan",this.drag).on("panend",this.dragEnd):this._container.on("transformstart",this.transformStart).on("transform",this.pinch).on("transformend",this.transformEnd).on("dragstart",this.dragStart).on("drag",this.drag).on("dragend",this.dragEnd))}var r=e.fn.nchlightbox("access"),s=r.css3,l=!0;if(1==$TS_VCSC_Hammer_ReleaseNew)var c=new Hammer(e(t).get(0),{prevent_default:!0});else var c=e(t).hammer();1==$TS_VCSC_Hammer_ReleaseNew?c.off("tap",i).on("tap",i):c.off("touch",i).on("touch",i),e.fn.nchlightbox("access","pinch",function(t,a){var i;return e(this).each(function(r,s){var l;s=e(s),s.data("nch-pinchzoom",l=new n(s,t,a)),i===o?i=e(l.container):i.add(l.container)}),i})}(jQuery,window,document),function(){"use strict";var e="undefined"!=typeof module&&module.exports,t="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,a=function(){for(var e,t,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],o=0,i=a.length,n={};i>o;o++)if(e=a[o],e&&e[1]in document){for(o=0,t=e.length;t>o;o++)n[a[0][o]]=e[o];return n}return!1}(),o={request:function(e){var o=a.requestFullscreen;e=e||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[o]():e[o](t&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[a.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},raw:a};return a?(Object.defineProperties(o,{isFullscreen:{get:function(){return Boolean(document[a.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[a.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(document[a.fullscreenEnabled])}}}),void(e?module.exports=o:window.screenfull=o)):void(e?module.exports=!1:window.screenfull=!1)}();